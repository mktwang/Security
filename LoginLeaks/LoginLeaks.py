import collections

f = open("LoginLeaks.txt", "r")

contents = f.readlines()
password = ""

l_map = collections.defaultdict(list)
l_map2 = collections.defaultdict(list)

for x in contents:
    if x[1] in l_map:
        if x[0] in l_map[x[1]]:
            continue
        else:
            l_map[x[1]].append(x[0])
    else:
        l_map[x[1]] = [x[0]]

for x in contents:
    if x[1] in l_map2:
        if x[2] in l_map2[x[1]]:
            continue
        else:
            l_map2[x[1]].append(x[2])
    else:
        l_map2[x[1]] = [x[2]]


l_map_sorted = {k: v for k, v in sorted(
    l_map.items(), key=lambda item: len(item[1]))}

prev = '{'
for key, value in l_map_sorted.items():
    if prev in value:
        password += prev
    else:
        password += '?'
    print(key, value, len(value))
    prev = key

print('\n')

l_map_sorted2 = {k: v for k, v in sorted(
    l_map2.items(), key=lambda item: len(item[1]))}

prev = '}'
password2 = ''
for key, value in l_map_sorted2.items():
    if prev in value:
        password2 = prev + password2
    else:
        password2 = '?' + password2
    print(key, value, len(value))
    prev = key

print('\n')

print(password + 'R')
print('-' + password2)

f.close()


# {><!A9-n?$)(e*W?zqL???f??R
# -n?)?$(?e*Wzq??_?&Zf2R6^d}

# > ['{'] 1
# < ['>', '{'] 2
# ! ['{', '<', '>'] 3
# A ['<', '!', '>', '{'] 4
# 9 ['>', '<', 'A', '!', '{'] 5
# - ['A', '<', '!', '{', '9', '>'] 6
# n ['<', '9', '{', '!', 'A', '-', '>'] 7
# d ['&', '*', '{', '_', 'q', 'f', 'n'] 7
# $ ['9', 'A', '>', 'n', '!', '-', '{', '<'] 8
# ) ['A', 'n', '!', '9', '-', '>', '{', '$', '<'] 9
# ( ['-', '{', 'A', '!', '<', '9', '$', 'n', ')', '>'] 10
# e ['-', '>', '(', ')', 'A', '!', '9', 'n', '<', '$', '{'] 11
# * ['>', '!', '<', 'A', 'n', '{', '$', '(', '-', '9', 'e'] 11
# W ['>', '*', '(', ')', 'n', 'e', '9', '{', '$', '-', '!', '<', 'A'] 13
# ^ ['(', '*', 'A', 'L', '6', 'e', '$', 'W', 'f', ')', '-', 'q', '>', '2'] 14
# z ['$', '9', '*', '<', '>', '{', '(', 'W', 'e', 'n', '-', ')', 'A', '!'] 14
# q ['>', '<', 'n', '!', '(', 'W', 'z', '-', '9', '$', '*', 'e', '{', ')'] 14
# L ['!', '9', 'n', '>', '(', 'W', '{', 'e', '*', '$', 'q', 'A', 'z', ')'] 14
# Z ['&', '<', '{', 'e', 'L', '9', '*', '>', 'q', '_', ')', 'z', 'W', '-', 'A'] 15
# & ['_', 'e', '!', 'L', '{', '9', '(', ')', 'A', 'z', '$', 'q', '<', 'W', '-'] 15
# _ [')', 'e', '-', '9', '>', 'W', 'q', '{', '*', 'L', 'A', '<', '$', 'z', '(', 'n'] 16
# f ['!', '*', '<', '&', ')', '$', 'L', 'A', 'q', '{', 'W', 'n', 'Z', '>', 'z', '9', '('] 17
# 2 ['_', 'A', 'L', '!', '$', 'n', ')', 'q', 'z', 'Z', '<', 'e', 'f', '-', '&', '9', '*', '>'] 18
# 6 ['9', 'R', '&', '<', ')', 'W', 'f', '-', 'L', '>', '{', 'n', '*', 'e', '(', '$', '!', 'q'] 18
# R [')', 'L', 'n', '2', 'A', '-', 'Z', 'f', 'q', '(', 'e', '$', 'W', '_', '*', '&', '!', 'z', '{'] 19

# d ['}'] 1
# ^ ['}', 'd'] 2
# 6 ['d', '}', '^'] 3
# R ['d', '^', '6', '}'] 4
# 2 ['6', '^', '}', 'd', 'R'] 5
# f ['}', 'R', '2', '^', 'd', '6'] 6
# Z ['6', 'd', 'R', '}', '2', 'f', '^'] 7
# & ['Z', '6', 'R', 'd', '2', '^', '}', 'f'] 8
# L ['f', '^', 'Z', '_', '2', '&', '6', 'd', '}'] 9
# _ ['R', '^', '2', '&', '}', '6', 'Z', 'd', 'f'] 9
# > ['d', 'L', '6', '$', '^', '2', 'z', '_', 'R'] 9
# < ['f', '_', '2', 'A', '(', 'z', 'R', 'L', '9'] 9
# q ['_', 'f', '}', 'd', '&', '6', '^', '2', 'R', 'Z', 'L'] 11
# z ['q', '}', '2', 'd', '6', 'L', 'R', '^', 'Z', '_', '&', 'f'] 12
# W ['_', '&', '^', 'z', '6', '2', 'Z', '}', 'q', 'd', 'L', 'f', 'R'] 13
# * ['f', 'q', '^', '_', 'R', 'z', 'W', 'L', '&', '2', '6', 'd', 'Z', '}'] 14
# e ['6', 'L', '_', 'W', 'd', '^', 'z', '&', '}', 'q', '2', 'f', '*', 'R', 'Z'] 15
# ! ['R', 'A', '*', '}', '-', '^', '&', 'L', '9', 'd', 'n', '_', 'Z', 'z', 'e'] 15
# ( ['&', 'e', 'L', 'W', '*', '}', '6', 'R', 'f', '_', 'd', 'z', 'Z', '^', '2'] 15
# $ ['e', 'z', '^', '6', '_', 'L', '*', ')', 'R', '2', '}', '(', 'f', 'd', 'q', 'Z', '&'] 17
# 9 ['6', 'W', '}', 'd', 'L', 'q', 'e', '^', ')', '$', '*', 'Z', '2', 'z', 'f', '(', '&'] 17
# ) ['f', 'R', '(', 'd', '&', 'W', '}', 'e', 'Z', 'z', '*', '2', '6', '^', '_', 'L', 'q'] 17
# A ['f', '(', ')', '_', '$', 'R', 'z', 'Z', '&', 'W', '-', 'd', '6', '2', '}', 'L', '^', 'q'] 18
# n ['f', 'L', 'q', '&', ')', '2', 'Z', 'd', '}', 'R', '6', '(', 'W', '*', 'z', 'e', '$', '_'] 18
# - ['R', '6', 'L', 'd', '_', '*', 'q', '$', 'Z', 'f', 'n', 'W', '}', '2', 'z', '^', 'e', ')', '&', '('] 20

# Manually Matching gives: {><!A9-n$)(e*WzqL_&Zf2R6^d}
